/* =========================================
   容器 (定高 + 遮罩 + 3D滚轮感)
========================================= */
#gemini-map-sidebar {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  right: 0;
  
  height: 180px; /* 显示高度 */
  width: 40px; 
  
  background: transparent !important;
  border: none;
  box-shadow: none;
  
  z-index: 2147483647;
  display: flex;
  flex-direction: column;
  
  transition: width 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
  pointer-events: auto; 
  
  /* 滚轮遮罩效果 */
  mask-image: linear-gradient(
    to bottom, 
    transparent 0%, 
    black 20%, 
    black 80%, 
    transparent 100%
  );
  -webkit-mask-image: linear-gradient(
    to bottom, 
    transparent 0%, 
    black 20%, 
    black 80%, 
    transparent 100%
  );
}

#gemini-map-sidebar:hover {
  width: 240px;
}

/* =========================================
   列表内容区
========================================= */
.map-content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: none; 
  padding-right: 10px; 
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
}
.map-content::-webkit-scrollbar { display: none; }

/* =========================================
   单个条目
========================================= */
.history-node {
  display: flex;
  align-items: center;
  justify-content: flex-end; 
  height: 36px; 
  scroll-snap-align: center;
  padding: 0 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  opacity: 0.4;
  transform: scale(0.95);
}

/* =========================================
   文字样式
========================================= */
.node-text {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  font-size: 12px; 
  font-weight: 400;
  letter-spacing: 0.5px;
  text-align: right;
  
  color: #fff;
  /* 基础阴影，保证文字在复杂背景上也能看见 */
  text-shadow: 0 1px 2px rgba(0,0,0,0.8);
  
  flex: 1;
  margin-right: 12px;
  
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  
  opacity: 0;
  transform: translateX(10px);
  transition: all 0.3s ease;
}

#gemini-map-sidebar:hover .node-text {
  opacity: 1;
  transform: translateX(0);
}

/* =========================================
   指示条
========================================= */
.indicator-bar {
  display: block;
  width: 4px; 
  height: 4px; 
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.5);
  box-shadow: 0 1px 3px rgba(0,0,0,0.5);
  flex-shrink: 0;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* =========================================
   交互与高亮状态 (重点修改部分)
========================================= */

/* 1. 鼠标悬停在某一行 (Focus) */
.history-node:hover {
  opacity: 1; 
  transform: scale(1);
}

/* 【修改】悬停时文字变为蓝色 */
.history-node:hover .node-text {
  color: #4e9eff; /* 变蓝 */
  font-weight: 500;
  /* 增加一点蓝色光晕，去掉黑阴影，让它看起来是发光的 */
  text-shadow: 0 0 10px rgba(78, 158, 255, 0.4); 
}

.history-node:hover .indicator-bar {
  width: 4px;
  height: 16px; 
  border-radius: 2px;
  background-color: #4e9eff; 
  box-shadow: 0 0 8px rgba(78, 158, 255, 0.8);
}

/* 2. 当前激活状态 (Active) */
.history-node.active-node {
  opacity: 1;
  transform: scale(1);
}

.history-node.active-node .indicator-bar {
  background-color: #4e9eff;
  width: 4px;
  height: 16px; 
  border-radius: 2px;
}

/* 激活状态的文字也保持蓝色 */
.history-node.active-node .node-text {
  color: #4e9eff;
  font-weight: 500;
}